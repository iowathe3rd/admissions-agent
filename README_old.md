# üéì Admissions Agent - –£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–∏—ë–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏

> OSS self-hosted Telegram –±–æ—Ç –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–æ–π –ø—Ä–∏—ë–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏ —Å RAG —Å–∏—Å—Ç–µ–º–æ–π

–ê–≥–µ–Ω—Ç –ø–æ–º–æ–≥–∞–µ—Ç –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–∞–º 24/7, –ø—Ä–æ–≤–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∞—á–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –æ–±—É—á–µ–Ω–∏—è.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **Telegram Bot** - –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- üß† **RAG —Å–∏—Å—Ç–µ–º–∞** - –£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (Google Gemini)
- üìö **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π** - –ü—Ä–æ–≥—Ä–∞–º–º—ã, FAQ, –¥–æ–∫—É–º–µ–Ω—Ç—ã, —à–∞–≥–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è
- üîç **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** - ChromaDB –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- üìÑ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤** - JSON, TXT, PDF, DOCX —Ñ–∞–π–ª—ã
- üìä **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- üåê **REST API** - –ü–æ–ª–Ω—ã–π API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- üöÄ **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫** - –ü—Ä–æ—Å—Ç–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
poetry install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ API –∫–ª—é—á–∏ –≤ .env
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–ª–æ–∂–∏—Ç–µ –≤–∞—à–∏ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É –¥–∞–Ω–Ω—ã—Ö
src/data/seed/
‚îú‚îÄ‚îÄ programs.json      # –ü—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ faqs.json         # –í–æ–ø—Ä–æ—Å—ã-–æ—Ç–≤–µ—Ç—ã  
‚îú‚îÄ‚îÄ documents.json    # –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ info.txt          # –¢–µ–∫—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
‚îú‚îÄ‚îÄ handbook.pdf      # PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚îî‚îÄ‚îÄ rules.docx        # Word –¥–æ–∫—É–º–µ–Ω—Ç—ã
```

### 4. –ó–∞–ø—É—Å–∫
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã (RAG + Bot + API)
python run.py full
```

**–ì–æ—Ç–æ–≤–æ!** –í–∞—à –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

## üìÑ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

| –§–æ—Ä–º–∞—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|--------|----------|---------|
| **JSON** | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | `programs.json`, `faqs.json` |
| **TXT** | –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã | `admission_info.txt` |
| **PDF** | PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã | `handbook.pdf` |
| **DOCX** | Word –¥–æ–∫—É–º–µ–Ω—Ç—ã | `rules.docx` |

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏ —Å–æ–∑–¥–∞—Å—Ç –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π.

## üéØ –ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç–µ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `python run.py full`:

- ‚úÖ **Telegram –±–æ—Ç** –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤
- ‚úÖ **RAG —Å–∏—Å—Ç–µ–º–∞** –∏—â–µ—Ç –æ—Ç–≤–µ—Ç—ã –≤ –≤–∞—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö  
- ‚úÖ **FastAPI —Å–µ—Ä–≤–µ—Ä** –Ω–∞ http://localhost:8000
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üìã –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
python run.py ingest    # –¢–æ–ª—å–∫–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
python run.py bot       # –¢–æ–ª—å–∫–æ Telegram –±–æ—Ç
python run.py api       # –¢–æ–ª—å–∫–æ FastAPI —Å–µ—Ä–≤–µ—Ä  
python run.py test      # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python run.py full      # –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](QUICK_START.md) - –ó–∞–ø—É—Å–∫ –∑–∞ 5 –º–∏–Ω—É—Ç
- [üìñ –ü–æ–ª–Ω—ã–π –≥–∞–π–¥](SETUP_GUIDE.md) - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- [üìÑ –§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤](SUPPORTED_FORMATS.md) - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- [üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è](DOCUMENT_FORMATS_ADDED.md) - –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: FastAPI + SQLAlchemy
- **Bot**: aiogram 3.x  
- **RAG**: Google Gemini + ChromaDB
- **Database**: SQLite (async)
- **Documents**: PyPDF2, python-docx
- **Search**: Semantic vector search
- **Bot Framework**: aiogram
- **Database**: SQLite + SQLAlchemy (async)
- **Vector Store**: ChromaDB
- **LLM**: Google Gemini 2.5 series
- **Embeddings**: Google Gemini Embeddings
- **Containerization**: Docker
- **Testing**: pytest + pytest-asyncio

## ü§ñ LLM Models

This project uses the Google Gemini 2.5 series of models through the new `google/genai` Python SDK.

- **Default**: `gemini-2.5-flash` for most tasks
- **Complex cases**: `gemini-2.5-pro` 
- **Embeddings**: `gemini-embedding-001`

**SDK Documentation**: [google-genai on PyPI](https://pypi.org/project/google-genai/)

## üöÄ Quick Start

### Prerequisites

- Python 3.10+
- Poetry (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏)
- Docker & Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Local Development Setup

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd admissions-agent
   ```

2. **Install dependencies**
   ```bash
   poetry install
   ```

3. **Configure environment**
   ```bash
   cp .env.example .env
   # Edit .env file with your API keys
   ```

4. **Run with convenience script**
   ```bash
   # Full setup: ingest data + run API + bot
   python run.py full
   
   # Or step by step:
   python run.py ingest  # Index the data
   python run.py api     # Start API server
   python run.py bot     # Start Telegram bot
   ```

### Docker Deployment

1. **Configure environment**
   ```bash
   cp .env.example .env
   # Edit .env file with your API keys
   ```

2. **Build and run services**
   ```bash
   docker-compose up --build
   ```

The services will start in the following order:
1. `rag-ingest` - Indexes the seed data (runs once)
2. `api` - FastAPI server on port 8000
3. `bot` - Telegram bot

## üìã Environment Configuration

Create a `.env` file with the following variables:

```env
TELEGRAM_BOT_TOKEN="your_telegram_bot_token"
GEMINI_API_KEY="your_gemini_api_key"
```

### Getting API Keys

1. **Telegram Bot Token**:
   - Message [@BotFather](https://t.me/BotFather) on Telegram
   - Use `/newbot` command and follow instructions
   - Copy the provided token

2. **Google Gemini API Key**:
   - Visit [Google AI Studio](https://makersuite.google.com/app/apikey)
   - Create a new API key
   - Copy the key

## üîß Development

### Project Structure

```
src/
‚îú‚îÄ‚îÄ app/          # FastAPI application
‚îÇ   ‚îú‚îÄ‚îÄ main.py   # API entry point
‚îÇ   ‚îú‚îÄ‚îÄ models.py # Database models
‚îÇ   ‚îú‚îÄ‚îÄ db.py     # Database configuration
‚îÇ   ‚îî‚îÄ‚îÄ routers/  # API routes
‚îú‚îÄ‚îÄ bot/          # Telegram bot
‚îÇ   ‚îú‚îÄ‚îÄ runner.py # Bot entry point
‚îÇ   ‚îú‚îÄ‚îÄ handlers.py # Message handlers
‚îÇ   ‚îî‚îÄ‚îÄ keyboards.py # Inline keyboards
‚îú‚îÄ‚îÄ rag/          # RAG system
‚îÇ   ‚îú‚îÄ‚îÄ ingest.py # Data indexing
‚îÇ   ‚îú‚îÄ‚îÄ retriever.py # Context retrieval
‚îÇ   ‚îî‚îÄ‚îÄ genai.py  # Gemini integration
‚îú‚îÄ‚îÄ data/seed/    # Initial data
‚îî‚îÄ‚îÄ tests/        # Test suite
```

### Available Commands

```bash
# Data management
python run.py ingest    # Index seed data into vector store

# Development
python run.py api       # Start API server (localhost:8000)
python run.py bot       # Start Telegram bot
python run.py test      # Run test suite
python run.py full      # Complete setup and run

# Code quality
poetry run ruff check   # Lint code
poetry run black .      # Format code
poetry run pytest      # Run tests
```

### Adding New Data

To add new knowledge to the bot:

1. **Edit seed files** in `src/data/seed/`:
   - `programs.json` - Educational programs
   - `faqs.json` - Frequently asked questions
   - `documents.json` - Required documents
   - `steps.json` - Application process steps

2. **Re-index the data**:
   ```bash
   python run.py ingest
   ```

## üß™ Testing

The project includes comprehensive tests:

```bash
# Run all tests
python run.py test

# Run specific test files
poetry run pytest src/tests/test_api.py -v
poetry run pytest src/tests/test_rag.py -v
poetry run pytest src/tests/test_bot.py -v
```

### Test Coverage

- **API Tests**: FastAPI endpoints, database operations
- **RAG Tests**: Context retrieval, relevance filtering, hallucination prevention  
- **Bot Tests**: Message handlers, callback queries, error handling

## üìä API Documentation

When the API is running, visit:
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### Key Endpoints

- `GET /healthz` - Health check
- `GET /programs/` - List educational programs
- `GET /faqs/` - List FAQs
- `POST /search/rag` - RAG search (debug endpoint)

## üöÄ Deployment

### Production Considerations

1. **Environment Variables**: Use proper secrets management
2. **Database**: Consider PostgreSQL for production
3. **Monitoring**: Add logging and monitoring solutions
4. **Scaling**: Use multiple bot instances if needed
5. **Backup**: Regular database and vector store backups

### Example Production docker-compose

```yaml
version: '3.8'
services:
  app:
    image: admissions-agent:latest
    environment:
      - DATABASE_URL=postgresql://...
      - TELEGRAM_BOT_TOKEN=...
      - GEMINI_API_KEY=...
    restart: unless-stopped
```

## ü§ù Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests for new functionality
5. Ensure all tests pass
6. Submit a pull request

## üìÑ License

This project is open source. See LICENSE file for details.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø–∞–ø–∫–µ [`docs/`](./docs/):

- üöÄ [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](./docs/quick-start.md)
- ‚öôÔ∏è [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](./docs/installation.md) 
- üèóÔ∏è [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](./docs/architecture/overview.md)
- üíª [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞](./docs/development/local-development.md)
- ü§ñ [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](./docs/components/)
- üìä [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏](./docs/data/seed-data.md)
- ‚ùì [FAQ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](./docs/troubleshooting/faq.md)

## üÜò Support

For questions and support:
- Check the [comprehensive documentation](./docs/)
- Review the [FAQ section](./docs/troubleshooting/faq.md)
- Create an issue on GitHub
- Check the API documentation at `/docs` endpoint
